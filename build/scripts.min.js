"use strict";function isEmail(e){return String(e).search(isEmail_re)!=-1}$(document).ready(function(){var e="WebkitAppearance"in document.documentElement.style;e&&$(window).width()>=1020&&!function(){var e=document.querySelectorAll(".parallax"),n=.6;window.onscroll=function(){[].slice.call(e).forEach(function(e,a){var o=window.pageYOffset,t=e.offsetTop,i="100% "+(o-t)*n+"px";e.style.backgroundPosition=i})}}(),mixpanel.track_links(".link-pdf","Print/Download Resume",{referrer:document.referrer}),mixpanel.track_links(".link-linkedin","Viewed LinkedIn",{referrer:document.referrer}),mixpanel.track_links(".link-github","Viewed GitHub",{referrer:document.referrer}),$("h3, h4").wrapInner('<span class="underline" />'),$("#section-works img").wrap('<div class="img-wrap" />')}),$(function(){$("#section-nav a, .button").bind("click",function(e){var n=$(this);$("html, body").stop().animate({scrollTop:$(n.attr("href")).offset().top},1e3,"easeInOutExpo"),e.preventDefault()})});var isEmail_re=/^\s*[\w\-\+_]+(\.[\w\-\+_]+)*\@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/;$(document).ready(function(){$("form#contactForm button.submit").click(function(){var e=$("form#contactForm input#contactName").val(),n=$("form#contactForm input#contactEmail").val(),a=$("form#contactForm #contactMessage").val(),o=$("form#contactForm input#contactCaptcha").val(),t=$("form#contactForm input#contactCaptchaAnswer").val(),i="contactName="+e+"&contactEmail="+n+"&contactMessage="+a,r="";return""==e&&(r+="Please enter your name<br />"),""==n?r+="Please enter your e-mail<br />":isEmail(n)!==!0&&(r+="Please enter a valid e-mail address<br />"),""==a&&(r+="Please enter your message<br />"),o!==t&&(r+="Please enter the correct validation value <br />"),""==r?$.ajax({type:"POST",url:"https://formspree.io/alastairpurvis@gmail.com",dataType:"json",data:i,success:function(){$("#contact-success").fadeIn(),$("form#contactForm").fadeOut(),$("#contact-warning").hide()}}):($("#contact-warning").html(r),$("#contact-warning").fadeIn()),!1})}),function(e){var n=!1;e(document).on("click","a[data-reveal-id]",function(n){n.preventDefault();var a=e(this).attr("data-reveal-id");e("#"+a).reveal(e(this).data())}),e.fn.reveal=function(a){var o=e(document),t={animation:"fade",animationSpeed:200,closeOnBackgroundClick:!0,dismissModalClass:"close-reveal-modal",open:e.noop,opened:e.noop,close:e.noop,closed:e.noop};return a=e.extend({},t,a),this.not(".reveal-modal.open").each(function(){function t(){g=!1}function i(){g=!0}function r(){var a=e(".reveal-modal.open");1===a.length&&(n=!0,a.trigger("reveal:close"))}function l(){g||(i(),r(),v.addClass("open"),"fadeAndPop"===a.animation&&(y.open.top=o.scrollTop()-u,y.open.opacity=0,v.css(y.open),b.fadeIn(a.animationSpeed/2),v.delay(a.animationSpeed/2).animate({top:o.scrollTop()+f+"px",opacity:1},a.animationSpeed,function(){v.trigger("reveal:opened")})),"fade"===a.animation&&(y.open.top=o.scrollTop()+f,y.open.opacity=0,v.css(y.open),b.fadeIn(a.animationSpeed/2),v.delay(a.animationSpeed/2).animate({opacity:1},a.animationSpeed,function(){v.trigger("reveal:opened")})),"none"===a.animation&&(y.open.top=o.scrollTop()+f,y.open.opacity=1,v.css(y.open),b.css({display:"block"}),v.trigger("reveal:opened")))}function c(){var e=v.find(".flex-video"),n=e.find("iframe");n.length>0&&(n.attr("src",n.data("src")),e.fadeIn(100))}function s(){g||(i(),v.removeClass("open"),"fadeAndPop"===a.animation&&(v.animate({top:o.scrollTop()-u+"px",opacity:0},a.animationSpeed/2,function(){v.css(y.close)}),n?v.trigger("reveal:closed"):b.delay(a.animationSpeed).fadeOut(a.animationSpeed,function(){v.trigger("reveal:closed")})),"fade"===a.animation&&(v.animate({opacity:0},a.animationSpeed,function(){v.css(y.close)}),n?v.trigger("reveal:closed"):b.delay(a.animationSpeed).fadeOut(a.animationSpeed,function(){v.trigger("reveal:closed")})),"none"===a.animation&&(v.css(y.close),n||b.css({display:"none"}),v.trigger("reveal:closed")),n=!1)}function d(){v.unbind(".reveal"),b.unbind(".reveal"),m.unbind(".reveal"),e("body").unbind(".reveal")}function p(){var e=v.find(".flex-video"),n=e.find("iframe");n.length>0&&(n.data("src",n.attr("src")),n.attr("src",""),e.fadeOut(100))}var m,v=e(this),f=parseInt(v.css("top"),10),u=v.height()+f,g=!1,b=e(".reveal-modal-bg"),y={open:{top:0,opacity:0,visibility:"visible",display:"block"},close:{top:f,opacity:1,visibility:"hidden",display:"none"}};0===b.length&&(b=e("<div />",{"class":"reveal-modal-bg"}).insertAfter(v),b.fadeTo("fast",.8)),v.bind("reveal:open.reveal",l),v.bind("reveal:open.reveal",c),v.bind("reveal:close.reveal",s),v.bind("reveal:closed.reveal",p),v.bind("reveal:opened.reveal reveal:closed.reveal",t),v.bind("reveal:closed.reveal",d),v.bind("reveal:open.reveal",a.open),v.bind("reveal:opened.reveal",a.opened),v.bind("reveal:close.reveal",a.close),v.bind("reveal:closed.reveal",a.closed),v.trigger("reveal:open"),m=e("."+a.dismissModalClass).bind("click.reveal",function(){v.trigger("reveal:close")}),a.closeOnBackgroundClick&&(b.css({cursor:"pointer"}),b.bind("click.reveal",function(){v.trigger("reveal:close")})),e("body").bind("keyup.reveal",function(e){27===e.which&&v.trigger("reveal:close")})})}}(jQuery);